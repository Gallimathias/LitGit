<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <PropertyGroup>
        <ScriptExe Condition="'$(OS)' == 'Windows_NT'" >powershell</ScriptExe>
        <ScriptExe Condition="'$(OS)' != 'Windows_NT'" ></ScriptExe>

        <ScriptFileEnding Condition="'$(OS)' == 'Windows_NT'" >.ps1</ScriptFileEnding>
        <ScriptFileEnding Condition="'$(OS)' != 'Windows_NT'" ></ScriptFileEnding>

        <LitGit>$(ScriptExe) $(MSBuildThisFileDirectory)../tools/LitGit$(ScriptFileEnding)</LitGit>
    </PropertyGroup>
    <ItemGroup>
        <AvailableItemName Include="LitGitTemplateReference" />
    </ItemGroup>

    <ItemGroup>
        <LitGitTemplates Include="@(LitGitTemplateReference)"/>
    </ItemGroup>
    <Target Name="BuildLitGitVersions" BeforeTargets="BeforeBuild;PreBuildEvent">
        <Exec Command="$(LitGit) -t %(LitGitTemplates.FullPath) -d $(MSBuildThisFileDirectory)" />
    </Target>

</Project>